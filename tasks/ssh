#!/usr/bin/env bash

echo "Generating github identity"
# NB: bitbucket does not yet support ed25519
# https://bitbucket.org/site/master/issues/10983/ed25519-ssh-keys-bb-13645
ssh-keygen -t rsa -b 4096 -C "analsandblaster@gmail.com" -f ~/.ssh/github_id
xclip -sel clip < ~/.ssh/github_id.pub
echo "Log in to github and bitbucket and paste clipboarded public key"
read -p "Press any key when keys have been added..."

echo "Verifying github"
ssh -T git@github.com
echo "Verifying bitbucket"
ssh -T git@bitbucket.org
