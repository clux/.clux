---
# npm playbook - install cli tools globally

- name: npm prefix
  shell: npm config set prefix /home/{{ desktop_user }}/.node_modules

- name: Install global npm dependencies
  shell: npm install -g {{ item }}
  args:
    creates: "/home/{{ desktop_user }}/.node_modules/bin/{{ item }}"
  with_items:
  - badgify
  - faucet
  - eslint
  - jshint
  - jsonlint
  - json
  - js-yaml
  - pkginit
  - asciify
  - marked-man
  - yr-cli
  - zalgolize

- name: broxy global modules
  when: inventory_hostname == "broxy"
  shell: npm install -g {{ item }}
  args:
    creates: "/home/{{ desktop_user }}/.node_modules/bin/{{ item }}"
  with_items:
  - pm2

- file: path=/home/{{ desktop_user }}/.config/pkginit/ state=directory
- template:
    src=templates/pkg.json
    dest=/home/{{ desktop_user }}/.config/pkginit/default.json
